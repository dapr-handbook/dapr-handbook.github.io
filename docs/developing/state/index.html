<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Dapr 指南 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Dapr 指南 Blog Atom Feed"><title data-react-helmet="true">状态管理 | Dapr 指南</title><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/developing/state"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="状态管理 | Dapr 指南"><meta data-react-helmet="true" name="description" content="前言"><meta data-react-helmet="true" property="og:description" content="前言"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/developing/state"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/developing/state" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/developing/state" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7a60ce0c.css">
<link rel="preload" href="/assets/js/runtime~main.77124ee6.js" as="script">
<link rel="preload" href="/assets/js/main.629f43a4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/docusaurus.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/docusaurus.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Dapr 指南</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started/overview">入门</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active navbar__link--active" href="/docs/developing/state">进阶</a><a class="navbar__item navbar__link" href="/blog">文摘</a><a href="http://gitlab-hz.lonsid.cn/Team-Works/Techs-Preview/Dapr-Handbook" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitLab</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/docusaurus.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/docusaurus.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Dapr 指南</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started/overview">入门</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active navbar__link--active" href="/docs/developing/state">进阶</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">文摘</a></li><li class="menu__list-item"><a href="http://gitlab-hz.lonsid.cn/Team-Works/Techs-Preview/Dapr-Handbook" target="_blank" rel="noopener noreferrer" class="menu__link">GitLab</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/developing/state">状态管理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/developing/pubsub">发布订阅</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/developing/actor">逻辑单元</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/developing/bindings">外部对接</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/developing/workflow">工作流</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">状态管理</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="前言"></a>前言<a class="hash-link" href="#前言" title="Direct link to heading">#</a></h2><p>有状态的服务本质上是一些有状态对象的集合，这些对象状态的变化只发生在当前服务进程中。</p><p>举一个很简单的栗子：我们平时玩的斗地主游戏，三个玩家，当有一个玩家因为网络原因掉线，经过一段时间，这个玩家又重新上线，需要根据某些记录来恢复玩家掉线期间系统自动出牌的记录，这些出牌记录在这个业务中其实就是这个玩家的状态变化记录。在有状态的服务中，很容易做到这一点。</p><p>有状态的服务在设计难度上比无状态的服务要大很多，不仅仅是因为开发设计人员需要更好的抽象能力，更多的是一致性的设计问题。</p><p>现代的分布式系统，都是由多个服务器组成一个集群来对外提供服务，当一个对象在服务器 A 产生之后，如果请求被分配到了服务器 B 上，这种情况下有状态的服务毫无意义，为什么呢？当一个相同的业务对象存在于不同的服务器上的时候，本质上就违背了现实世界的规则，你能说一个人，即出生在中国，又出生在美国吗？ </p><p>所以有状态的服务对于一致性问题有着天然的要求，这种思想和微服务设计理想不谋而合。因此，有状态的服务对于同一个对象的横向扩容是做不到的，就算是做的到，多个相同对象之间的状态同步工作也必然会花费更多的资源。在很多场景下，有状态的服务要注意热点问题，例如最常见的秒杀，这里并非是说有状态服务不适合大并发的场景，反而在高并发的场景下，有状态的服务往往表现的比无状态服务更加出色。</p><p>分布式应用程序中的跟踪状态可能具有挑战性。 例如：</p><ul><li>访问和更新数据时可能需要不同的一致性级别。</li><li>多个用户可以同时更新数据，需要冲突解决。</li><li>在与数据存储交互时，服务必须重试任何暂时性错误。</li></ul><p>对于这些情况， Dapr 提供了状态管理的能力，并提供了跨各种数据存储的高级功能。</p><p><img src="/assets/images/state-management-overview-14fc5b59ece3c363a836f653f45c3c3a.png">)</p><p>Dapr 状态管理构建块解决了这些难题。 它简化了跟踪状态，而无需依赖关系或学习曲线在第三方存储 Sdk 上。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="特性"></a>特性<a class="hash-link" href="#特性" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="一致性"></a>一致性<a class="hash-link" href="#一致性" title="Direct link to heading">#</a></h3><p><a href="https://en.wikipedia.org/wiki/CAP_theorem" target="_blank" rel="noopener noreferrer">CAP 定理</a> 是一组适用于存储状态的分布式系统的原则。 下图显示了 CAP 定理的三个属性。</p><p><img src="/assets/images/cap-theorem-e879fe158551263fb5a9d02482626a4f.png"></p><p>定理指出，分布式数据系统提供一致性、可用性和分区容差之间的权衡。 而且，任何数据存储只能保证三个属性中的两个：</p><ul><li><p><strong>一致性</strong> (C) : 群集中的每个节点都将使用最新的数据做出响应，即使在所有副本更新之前，系统都必须阻止请求。 如果查询当前正在更新的项的 &quot;一致性系统&quot;，则在所有副本都成功更新之前，将不会收到响应。 但是，您将始终接收最新的数据。</p></li><li><p><strong>可用性</strong> (A) : 即使该响应不是最新的数据，每个节点都将返回立即响应。 如果您在 &quot;可用系统&quot; 中查询正在更新的项，则您将获得该服务在此时可以提供的最佳可能的答案。</p></li><li><p><strong>分区容差</strong> (P) : 即使复制的数据节点发生故障或失去与其他复制的数据节点的连接，保证系统仍可继续运行。</p></li></ul><p>分布式应用程序必须处理 P 属性。 随着服务彼此间的网络调用通信，会发生网络中断 (P) 。 考虑到这一点，分布式应用程序必须是 AP 或 CP。</p><p>Dapr同时支持强一致性 (CP) 和最终一致性 (AP) ，其中最终一致性为默认行为。</p><p>当使用强一致性时，Dapr会等待所有副本确认后才会确认写入请求。 </p><p>当最终使用一致性时，Dapr 将在基本数据存储接受写入请求后立即返回，即使这是单个副本。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="并发"></a>并发<a class="hash-link" href="#并发" title="Direct link to heading">#</a></h3><p>在多用户系统中，有可能多个用户同一时间操作同一数据。 通常采用乐观并发控制 (OCC) 来管理冲突。 Dapr 支持使用 <code>Etags</code> 的乐观并发控制（OCC）。 ETags 是特定版本的 <code>key/value</code> 数据。 <code>key/value</code> 的每次更新，<code>ETag</code> 值也会更新。 当客户端检索<code>key/value</code>时，响应包括当前 <code>ETag</code> 值。 当客户端更新或删除<code>key/value</code>时，它必须在请求正文中发送回该 <code>ETag</code> 值。 如果其他客户端同时更新了数据，则 <code>Etag</code> 不会匹配，请求将失败。 此时，客户端必须检索更新的数据，重新进行更改，然后重新提交更新。 此策略称为 <code>first-write-wins</code>。</p><p>Dapr 还支持 <code>last-write-wins</code> 策略。 使用此方法时，客户端不会将 <code>ETag</code> 附加到写入请求。 状态存储组件将始终允许更新，即使基础值在会话期间已更改也是如此。 <code>last-write-wins</code> 对于数据争用较少的高吞吐量写入方案非常有用。 同样，可以容忍偶尔的用户更新。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="开发"></a>开发<a class="hash-link" href="#开发" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="配置状态存储"></a>配置状态存储<a class="hash-link" href="#配置状态存储" title="Direct link to heading">#</a></h3><p>状态存储组件代表Dapr用来与数据库进行通信的资源。</p><p>作为演示目的，本篇采用Redis作为存储源，其他存储源请参考这个 <a href="https://docs.dapr.io/zh-hans/reference/components-reference/supported-state-stores/" target="_blank" rel="noopener noreferrer">清单</a>。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="localhost"></a>Localhost<a class="hash-link" href="#localhost" title="Direct link to heading">#</a></h4><p>当在单机模式下使用 <code>dapr init</code> 时，Dapr CLI会自动提供一个状态存储(Redis)，并在components目录中创建相关的YAML</p><ul><li>在Linux/MacOS上位于 <code>$HOME/.dapr/components</code>，</li><li>在Windows上位于 <code>%USERPROFILE%/.dapr/components</code>。  </li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubernetes"></a>Kubernetes<a class="hash-link" href="#kubernetes" title="Direct link to heading">#</a></h4><p>在 Kubernetes 中部署，需要编写下面的文件，可以命名为 <code>statestore.yaml</code>  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: dapr.io/v1alpha1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Component</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: statestore</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: masa-stack</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type: state.redis</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  version: v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: redisHost</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    value: redis-master.dapr.svc.cluster.local:6379</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: redisPassword</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    value: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - name: actorStateStore</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    value: &quot;true&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>然后注入到K8S中 <code>kubectl apply -f statestore.yaml</code> 。</p><p><strong>注意：</strong> 最初，参考官方配置，我们认为，命名空间不选，或者选择dapr命名空间，才是合理的，这会导致下面的问题：</p><p><img src="/assets/images/20211103165907-25004a23f73d52771f90ee21f48c2904.png"></p><p>通过反复调试，发现，该组件的命名空间，需要跟业务服务在一起！</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">namespace: masa-stack</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="读写单个状态"></a>读写单个状态<a class="hash-link" href="#读写单个状态" title="Direct link to heading">#</a></h3><p>下面的示例演示如何使用Dapr从状态存储读取数据。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="通过curl命令"></a>通过curl命令<a class="hash-link" href="#通过curl命令" title="Direct link to heading">#</a></h4><ul><li>写状态</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -X POST -H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Content-Type: application/json&quot;</span><span class="token plain"> -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[{ &quot;key&quot;: &quot;key1&quot;, &quot;value&quot;: &quot;value1&quot;}]&#x27;</span><span class="token plain"> http://localhost:3500/v1.0/state/statestore</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>读状态</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://localhost:3500/v1.0/state/statestore/key1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="通过net-sdk"></a>通过.Net SDK<a class="hash-link" href="#通过net-sdk" title="Direct link to heading">#</a></h4><ul><li>读状态</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly C#"><div tabindex="0" class="prism-code language-C# codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var weatherForecast = await daprClient.GetStateAsync&lt;WeatherForecast&gt;(&quot;statestore&quot;, &quot;AMS&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>写状态  </li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly C#"><div tabindex="0" class="prism-code language-C# codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">daprClient.SaveStateAsync(&quot;statestore&quot;, &quot;AMS&quot;, weatherForecast);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>该示例使用 &quot;last-write-wins&quot; 策略，因为 ETag 值不会传递给状态存储组件。 </p><p>若要将乐观并发控制 (OCC) &quot;first-write-wins&quot; 策略，请先使用 <code>DaprClient.GetStateAndETagAsync</code> 获得 <code>ETag</code>， 然后使用 <code>DaprClient.TrySaveStateAsync</code> 方法写入更新后的值，并传递先前的<code>ETag</code>。如下：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly C#"><div tabindex="0" class="prism-code language-C# codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var (weatherForecast, etag) = await daprClient.GetStateAndETagAsync&lt;WeatherForecast&gt;(&quot;statestore&quot;, city);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ... make some changes to the retrieved weather forecast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var result = await daprClient.TrySaveStateAsync(&quot;statestore&quot;, city, weatherForecast, etag);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>DaprClient.TrySaveStateAsync</code> 方法会返回一个布尔值，指示调用是否成功。 </p><p>处理失败的一种策略是，只需从状态存储重新加载更新后的数据，再次进行更改，然后重新提交更新。</p><p>如果始终希望写入成功，而不考虑对数据的其他更改，请使用 &quot;last-write-wins&quot; 策略。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="读写多个状态"></a>读写多个状态<a class="hash-link" href="#读写多个状态" title="Direct link to heading">#</a></h3><p>Dapr还允许你在同一个调用中读写多个状态。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="通过curl命令-1"></a>通过curl命令<a class="hash-link" href="#通过curl命令-1" title="Direct link to heading">#</a></h4><ul><li>写状态</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -X POST http://localhost:3500/v1.0/state/statestore </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[{ &quot;key&quot;: &quot;Key1&quot;, &quot;value&quot;: &quot;Value1&quot; },{ &quot;key&quot;: &quot;Key2&quot;, &quot;value&quot;: &quot;Value2&quot; }]&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>读状态</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -X POST  http://localhost:3500/v1.0/state/statestore </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;{&quot;keys&quot;:[&quot;key1&quot;, &quot;key2&quot;]}&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/developing/pubsub"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">发布订阅 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link">前言</a></li><li><a href="#特性" class="table-of-contents__link">特性</a><ul><li><a href="#一致性" class="table-of-contents__link">一致性</a></li><li><a href="#并发" class="table-of-contents__link">并发</a></li></ul></li><li><a href="#开发" class="table-of-contents__link">开发</a><ul><li><a href="#配置状态存储" class="table-of-contents__link">配置状态存储</a></li><li><a href="#读写单个状态" class="table-of-contents__link">读写单个状态</a></li><li><a href="#读写多个状态" class="table-of-contents__link">读写多个状态</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 MASA Stack, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.77124ee6.js"></script>
<script src="/assets/js/main.629f43a4.js"></script>
</body>
</html>